{% extends "base.html" %}

{% block title %}Customer Statement{% endblock %}

{% block content %}

<div class="card p-4">

    <h2 class="mb-2">Customer Statement</h2>
    <p><strong>Customer:</strong> {{ customer.name }}</p>

    <div class="row mb-3">
        <div class="col-md-4">
            <strong>Total Invoiced:</strong> ₹ {{ total_invoiced|floatformat:2 }}
        </div>
        <div class="col-md-4">
            <strong>Total Paid:</strong> ₹ {{ total_paid|floatformat:2 }}
        </div>
        <div class="col-md-4">
            <strong>Balance:</strong>
            <span class="{% if balance > 0 %}text-danger{% else %}text-success{% endif %}">
                ₹ {{ balance|floatformat:2 }}
            </span>
        </div>
    </div>

    <hr>

    <h5>Invoices</h5>
    <table class="table table-bordered mb-4">
        <thead class="table-light">
            <tr>
                <th>Date</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for inv in invoices %}
            <tr>
                <td>{{ inv.date }}</td>
                <td>{{ inv.status }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="2">No invoices</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h5>Payments</h5>
    <table class="table table-bordered">
        <thead class="table-light">
            <tr>
                <th>Date</th>
                <th>Method</th>
                <th class="text-end">Amount</th>
            </tr>
        </thead>
        <tbody>
            {% for pay in payments %}
            <tr>
                <td>{{ pay.date }}</td>
                <td>{{ pay.method }}</td>
                <td class="text-end">₹ {{ pay.amount|floatformat:2 }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="3">No payments</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

</div>

{% endblock %}
