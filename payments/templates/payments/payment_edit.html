{% extends "base.html" %}

{% block title %}Edit Payment{% endblock %}

{% block content %}

<div class="card shadow-sm">
  <div class="card-body">

    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2>Edit Payment #{{ payment.id }}</h2>
      <a href="{% url 'payments:payment_list' %}" class="btn btn-secondary">
        ‚Üê Back to Payments
      </a>
    </div>

    {% if error %}
      <div class="alert alert-danger">{{ error }}</div>
    {% endif %}

    <form method="post">
      {% csrf_token %}

      <!-- ‚úÖ CUSTOMER -->
      <div class="mb-3">
        <label class="form-label">Customer</label>
        <select name="customer" class="form-select" required>
          {% for c in customers %}
            <option value="{{ c.id }}"
              {% if payment.customer_id == c.id %}selected{% endif %}>
              {{ c.name }}
            </option>
          {% endfor %}
        </select>
      </div>

      <!-- ‚úÖ PAYMENT DATE -->
      <div class="mb-3">
        <label class="form-label">Payment Date</label>
        <input type="date"
               name="date"
               class="form-control"
               value="{{ payment.date|date:'Y-m-d' }}"
               required>
      </div>

      <!-- ‚úÖ AMOUNT -->
      <div class="mb-3">
        <label class="form-label">Amount (‚Çπ)</label>
        <input type="number"
               step="0.01"
               name="amount"
               class="form-control"
               value="{{ payment.amount }}"
               required>
      </div>

      <!-- ‚úÖ METHOD -->
      <div class="mb-3">
        <label class="form-label">Payment Method</label>
        <select name="method" class="form-select">
          <option value="CASH" {% if payment.method == "CASH" %}selected{% endif %}>Cash</option>
          <option value="UPI" {% if payment.method == "UPI" %}selected{% endif %}>UPI</option>
          <option value="BANK" {% if payment.method == "BANK" %}selected{% endif %}>Bank Transfer</option>
        </select>
      </div>

      <div class="d-flex gap-2">
        <button type="submit" class="btn btn-primary">
          üíæ Update Payment
        </button>
        <a href="{% url 'payments:payment_list' %}" class="btn btn-secondary">
          Cancel
        </a>
      </div>

    </form>

  </div>
</div>

{% endblock %}
